<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>GRO Acloud.guru training - AWS Database</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/night.css">
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">

                <section data-transition="convex">
					<h3>AWS Database</h3>
					<img src="images/Generic_Databases.png" style="height: 300px; border: none; background: none;">
				</section>
                
                 <section data-transition="convex">					
					<h3>What are AWS Database options?</h3>
					<ul>
						<li class="fragment fade-up">RDS
                            <ul><li>Managed Relational Database Service</li></ul>
                        </li>
						<li class="fragment fade-up">DynamoDB
                            <ul><li>Managed NoSQL Database</li></ul>
                        </li>
						<li class="fragment fade-up">ElastiCache
                            <ul><li>In-Memory Cache</li></ul>
                        </li>
                        <li class="fragment fade-up">Redshift
                            <ul><li>Fast, Simple, Cost-Effective Data Warehousing</li></ul>
                        </li>
                        <li class="fragment fade-up">DMS (in Migration section now)
                            <ul><li>Managed Database Migration Service</li></ul>
                        </li>
					</ul>					
				</section>
                
                <!---------------------- RDS ---------------------->
                <section data-transition="convex">                    
                    <h3>RDS - Relational Database Service</h3>
                    <img src="images/rds.png" style="height: 112px; border: none; background: none;">
					<ul>
						<li class="fragment fade-up">Tables, Rows, Columns</li>						
                        <img class="fragment fade-up" src="images/data_table.png" style="height: 153px; border: none; background: none;">
					</ul>					
				</section>
                
                <section data-transition="convex">                    
					<h3>Relational Database Types in AWS</h3>					
					<ul>
                        <li>SQL Server</li>
                        <li>Oracle</li>
                        <li>MySQL Server</li>
                        <li>PostgreSQL</li>
                        <li>Aurora</li>
                        <li>MariaDB</li>
					</ul>					
				</section>
                
                 <section data-transition="convex">                    
					<h3>RDS - Backups</h3>					
					<ul>
                        <li class="fragment fade-up">Automated Backups</li>
                        <ul>
                            <li class="fragment fade-up">Recover the db within a retention period – 1 to 35 days</li>
                            <li class="fragment fade-up">Full daily snapshot + transaction logs</li>
                            <li class="fragment fade-up">Allows point in time recovery down to a second</li>
                            <li class="fragment fade-up">Stored in S3 (free storage same size as the db)</li>                        
                        </ul>
                        <li class="fragment fade-up">Database Snapshots</li>
                        <ul>
                            <li class="fragment fade-up">Done manually</li>
                            <li class="fragment fade-up">Stored after the RDS instance gets deleted</li>
                            <li class="fragment fade-up">Restored DB will be a new RDS instance</li>
                        </ul>
					</ul>					
				</section>
                
                 <section data-transition="convex">                    
					<h3>RDS - Encryption</h3>					
					<ul>
                        <li class="fragment fade-up">Supported DB types</li>
                        <ul class="fragment fade-up">
                            <li>MySQL</li>
                            <li>Oracle</li>
                            <li>SQL Server</li>
                            <li>PostgreSQL</li>
                            <li>MariaDB</li>
                        </ul>
                        <li class="fragment fade-up">Encrypting an existing DB is not supported yet</li>
					</ul>					
				</section>
                
                <section data-transition="slide-in fade-out">                    
					<h3>RDS - Multi AZ</h3>					
                    <img src="images/rds-multiaz.png" style="border: none; background: none;">
				</section>
                
                <section data-transition="fade-in slide-out">
					<h3>RDS - Multi AZ</h3>					
                    <img src="images/rds-multiaz-2.png" style="border: none; background: none;">
				</section>
                
                <section data-transition="convex">
					<h3>RDS - Multi AZ</h3>					
                    <ul>
                        <li class="fragment fade-up">AWS handles replication - writes to production DB will be synchronised to the standby DB in another AZ</li>
                        <li class="fragment fade-up">RDS will automatically failover to the standby DB in the event of:
                            <ul class="fragment fade-up">
                                <li>DB maintenance</li>
                                <li>DB instance failure</li>
                                <li>AZ failure</li>
                            </ul>
                        </li>
                        <li class="fragment fade-up">IMPORTANT: Only for Disaster Recovery - for performance improvement you need Read Replicas</li>
                    </ul>
				</section>
                
                <section data-transition="slide-in fade-out">                    
					<h3>RDS - Multi AZ</h3>					
                    <img src="images/read_replica_1.png" style="border: none; background: none;">
				</section>
                
                <section data-transition="fade-out">
					<h3>RDS - Multi AZ</h3>					
                    <img src="images/read_replica_2.png" style="border: none; background: none;">
				</section>
                
                <section data-transition="slide-out">
					<h3>RDS - Multi AZ</h3>					
                    <img src="images/read_replica_3.png" style="border: none; background: none;">
				</section>
                
                <section data-transition="convex">
					<h3>RDS - Read Replica</h3>					
                    <ul>
                        <li class="fragment fade-up">asynchronous replication from primary RDS instance</li>
                        <li class="fragment fade-up">for scaling up read-heavy DB workloads</li>
                        <li class="fragment fade-up">up to 5 Read Replicas for a DB instance</li>
                        <li class="fragment fade-up">can be promoted to be their own databases</li>
                        <ul class="fragment fade-up">
                            <li>MySQL</li>
                            <li>PostgreSQL</li>
                            <li>MariaDB</li>
                        </ul>
                    </ul>
				</section>
                
                <section data-transition="convex">
					<h3>RDS vs DynamoDB</h3>					
                    <ul>
                        <li class="fragment fade-up">RDS - use a bigger instance or add Read Replica</li>
                        <li class="fragment fade-up">DynamoDB - offers "push button" scaling, i.e. scaling on the fly, without any down time</li>
                    </ul>
				</section>
                
                <!---------------------- DynamoDB ---------------------->
                <section data-transition="convex">                    
					<h3>Non Relational Databases</h3>					
					<ul>
                        <li class="fragment fade-up">Database</li>                        
                        <ul class="fragment fade-up">
                            <li>Collection		= Table</li>
                            <li>Document		= Row</li>
                            <li>Key Value Pairs	= Fields</li>
                        </ul>                        
					</ul>	
                    <pre class="fragment fade-up"><code data-trim data-noescape>
                    {
                        "id":"1",
                        "firstName":"John",
                        "lastName":"Smith",
                        "age":"23",
                        "address":[
                            {
                                "street":"21 Jump Street"
                            }
                        ]
                    }
                    </code></pre>
				</section>
                
                <section data-transition="fade-out">
					<h3>DynamoDB</h3>
                    <img src="images/dynamodb.png" style="height: 128px; border: none; background: none;">
					<ul>
                        <li class="fragment fade-up">fast, flexible, fully managed NoSQL DB service</li>
                        <li class="fragment fade-up">provides consistent, single-digit milisecond latency at any scale</li>
                        <li class="fragment fade-up">supports both document and key-value data models</li>
                        <li class="fragment fade-up">great fit for mobile, web, gaming, ad-tech, IoT</li>
					</ul>	                    
				</section>
                
                <section data-transition="fade-out">
					<h3>DynamoDB</h3>
					<ul>
                        <li>stored on SSD</li>
                        <li class="fragment fade-up">spread across 3 geographically distinct data centers - i.e. in different facilities</li>
					</ul>	                    
				</section>
                
                <section data-transition="fade-out">
					<h3>DynamoDB</h3>
					<ul>
                        <li>Eventual Consistent Reads (Default)</li>
                        <ul class="fragment fade-up">
                            <li>consistency across all copies of data is reached within a second</li>
                            <li>repeating a read after a short time should return the updated data</li>
                        </ul>
                        <li class="fragment fade-up">Strongly Consistent Reads</li>
                        <ul class="fragment fade-up">
                            <li>returns a result that reflects all writes that received a successful response prior to the read</li>
                        </ul>
					</ul>	                    
				</section>
                
                <section data-transition="fade-out">
					<h3>DynamoDB Pricing</h3>
					<ul>
                        <li class="fragment fade-up">Provisioned Throughput Capapcity</li>
                        <ul class="fragment fade-up">
                            <li>Write Throughput $0.0065 per hour for every 10 units</li>
                            <li>Read Throughput $0.0065 per hour for every 50 units</li>
                        </ul>
                        <li class="fragment fade-up">1 write unit = 1 write / second</li>
                        <li class="fragment fade-up">Storage cost: $0.25 / GB / Month</li>
					</ul>
				</section>
                
                <section data-transition="fade-out">
					<h3>DynamoDB Pricing Example</h3>
					<ul>
                        <li class="fragment fade-up">1 million writes / day</li>
                        <li class="fragment fade-up">1 million reads / day</li>
                        <li class="fragment fade-up">storing 3 GB of data</li>
                        <li class="fragment fade-up">operations / second = 1 000 000 (writes) / 24 (hours) / 60 (minutes) / 60 (seconds) = 11.6 writes /second</li>
                        <li class="fragment fade-up">11.6 read/writes / sec = 12 read/write capacity unit</li>
                        <li class="fragment fade-up">Cost for Write Capacity Units = (0.0065/10) x 12 x 24 = $0.1872</li>
                        <li class="fragment fade-up">Cost for Read Capacity Units = (0.0065/50) x 12 x 24 = $0.0374</li>
					</ul>	                    
				</section>
                
                <!---------------------- Redshift ---------------------->
                <section data-transition="convex">                    
					<h3>Data Warehousing</h3>
					<ul>
                        <li>Used for business intelligence. Used to pull in very large and complex data sets. Usually used by management to do queries on data (current performance vs targets)</li>
					</ul>					
				</section>
                
                 <section data-transition="convex">                    
					<h3>OLTP vs OLAP</h3>					
					<ul>
                        <li class="fragment fade-up">Online Transaction Processing (OLTP)
                            <ul>
                                <li>Query one specific record or smaller recordset (pull up record with id 1234)</li>
                                <li>hits the DB lightly</li>
                            </ul>
                        </li>
                        <li class="fragment fade-up">Online Analytics Processing (OLAP)
                            <ul>
                                <li>To analyze large volume of information</li>
                                <li>Data warehousing – copy of production database (in different type of architecture e.g. columnar storage)</li>
                            </ul>
                        </li>
					</ul>					
				</section>
                
                <section data-transition="convex">                    
					<h3>Redshift - Data Warehousing</h3>
                    <img src="images/redshift.png" style="height: 135px; border: none; background: none;">
					<ul>
                        <li class="fragment fade-up">fully managed, petabyte-scale data warehouse service</li>
                        <li class="fragment fade-up">Single node - 160 Gb</li>
                        <li class="fragment fade-up">Multi-Node
                            <ul>
                                <li class="fragment fade-up">Leader Node - manages client connection and receives queries</li>
                                <li class="fragment fade-up">Compute Node - store data and perform computations (up to 128)</li>
                            </ul>
                        </li>
					</ul>					
				</section>
                
                <section data-transition="convex">                    
					<h3>Redshift - Architecture</h3>
					<ul>
                        <li class="fragment fade-up">Columnar Data Storage</li>
                        <ul>
                            <li class="fragment fade-up">row-based systems are ideal for transaction processing</li>
                            <li class="fragment fade-up">column-based systems are ideal for data warehousing and analytics</li>
                            <ul>
                                <li class="fragment fade-up">queries involve aggregates performed over large data sets</li>
                            </ul>
                        </ul>
                        <li class="fragment fade-up">Advanced Compression</li>
                        <ul>
                            <li class="fragment fade-up">multiple compression techniques, automatically selects the most appropriate</li>
                        </ul>
					</ul>					
				</section>
                
                <section data-transition="convex">                    
					<h3>Redshift - Architecture</h3>
					<ul>
                        <li class="fragment fade-up">Massively Parallel Processing (MPP)</li>
                        <ul>
                            <li class="fragment fade-up">automatically distributes data and query load across all nodes</li>
                            <li class="fragment fade-up">easy to add additional nodes</li>
                            <ul>
                                <li class="fragment fade-up">enables to maintain fast query performance as the data warehouse grows</li>
                            </ul>
                        </ul>
					</ul>					
				</section>
                
                <section data-transition="convex">                    
					<h3>Redshift - Pricing</h3>
					<ul>
                        <li class="fragment fade-up">Compute Node Hours</li>
                        <ul>
                            <li class="fragment fade-up">compute nodes / hours (leader nodes doesn't count)</li>
                            <li class="fragment fade-up">3 nodes, 24 hours, 30 days = 2160 hours</li>
                        </ul>
                        <li class="fragment fade-up">Backup</li>
                        <li class="fragment fade-up">Data transfer (only within a VPC)</li>
					</ul>					
				</section>
                
                <section data-transition="convex">                    
					<h3>Redshift - Availability</h3>
					<ul>
                        <li class="fragment fade-up">Currently only available in 1 AZ</li>
                        <li class="fragment fade-up">Can restore snapshots to new AZ's in the event of an outage</li>
					</ul>					
				</section>
                
                <!---------------------- ElastiCache ---------------------->
                <section data-transition="convex">
					<h3>ElastiCache</h3>
                    <img src="images/elasticache.png" style="height: 112px; border: none; background: none;">
					<ul>                
                        <li class="fragment fade-up">Makes it easy to deploy, operate and scale an in-memory cache in the cloud</li>
                        <li class="fragment fade-up">Improve performance of web applications to retrieve information from fast, managed, in-memory caches (instead of disk-based)</li>
					</ul>
				</section>
                
                <section data-transition="convex">
					<h3>ElastiCache</h3>
					<ul>
                        <li class="fragment fade-up">Improves latency and throughput for many read-heavy application workloads</li>
                        <ul>                
                            <li class="fragment fade-up">social networking</li>
                            <li class="fragment fade-up">gaming</li>
                            <li class="fragment fade-up">media sharing</li>
                            <li class="fragment fade-up">recommendation engine</li>
					    </ul>
					</ul>					
				</section>
                
                <section data-transition="convex">                    
					<h3>ElastiCache</h3>
					<ul>                
                        <li class="fragment fade-up">Memcached</li>
                        <ul>
                            <li class="fragment fade-up">no Multi-AZ support</li>
                        </ul>
                        <li class="fragment fade-up">Redis</li>
                        <ul>
                            <li class="fragment fade-up">open-source in-memory key-value store</li>
                            <li class="fragment fade-up">supports Master/Slave replication and Multi-AZ</li>
                        </ul>
					</ul>					
				</section>
                
                <section data-transition="convex">                    
					<h3>ElastiCache - Redis</h3>
                    <img src="images/redis.png" style="height: 128px; border: none; background: none;">
					<ul>
                        <li class="fragment fade-up"><a href="https://redis.io/clients" target="_blank">Redis client libs</a></li>
                        <li class="fragment fade-up">Easy connection setup with Redisson</li>
                        <pre class="fragment fade-up"><code data-trim data-noescape>
                        Config config = new Config();
                        config.useElasticacheServers()
                              .addNodeAddress("messenger-cluster.8zti7b.0001.euc1.cache.amazonaws.com:6379");
                        RedissonClient redisson = Redisson.create(config);
                        </code></pre>
					</ul>					
				</section>
                
                <!---------------------- Aurora ---------------------->
                <section data-transition="convex">                    
					<h3>Aurora</h3>					
					<ul>
                        <li class="fragment fade-up">MySQL compatible (5x better perf.), relational DB engine</li>
                        <li class="fragment fade-up">speed and availability of high-end commercial DB's</li>
                        <li class="fragment fade-up">simplicity and cost-effectiveness of open source DB's</li>
					</ul>					
				</section>
                
                <section data-transition="convex">                    
					<h3>Aurora Scaling</h3>
					<ul>
                        <li class="fragment fade-up">start with 10GB, autoscales in 10GB increments to 64TB</li>
                        <li class="fragment fade-up">compute resources can scale up to 32vCPUs and 244GB of Memory</li>
                        <li class="fragment fade-up">no "push button" scaling like in DynamoDB, but it's fast</li>
					</ul>					
				</section>
                
                <section data-transition="convex">                    
					<h3>Aurora Scaling</h3>
					<ul>
                        <li class="fragment fade-up">2 copies of your data in each AZ (minimum 3 AZ usage)</li>
                        <li class="fragment fade-up">loss of 2 copies without affecting DB write availability</li>
                        <li class="fragment fade-up">loss of 3 copies without affecting DB read availability</li>
                        <li class="fragment fade-up">self-healing = automatically scanned for errors and repaired</li>
					</ul>					
				</section>
                
                <section data-transition="convex">                    
					<h3>Aurora Replicas</h3>
					<ul>
                        <li class="fragment fade-up">Aurora Replicas - currently 15</li>
                        <ul>
                            <li class="fragment fade-up">automatic failover to aurora replica</li>
                        </ul>
                        <li class="fragment fade-up">MySQL Read Replicas - currently 5</li>
                        <ul>
                            <li class="fragment fade-up">NO automatic failover to MySQL read replica</li>
                        </ul>
                        
					</ul>					
				</section>
                
                <!---------------------- DMS ---------------------->
                <section data-transition="convex">                    
					<h3>Database Migration Service</h3>
                    <img src="images/dms.png" style="height: 130px; border: none; background: none;">
					<ul>
                        <li class="fragment fade-up">Allows to migrate a production database to AWS</li>
                        <li class="fragment fade-up">AWS manages data transformation, compression and parallel transfer</li>
                        <li class="fragment fade-up">Data changes to the source database that occur during the migration process are automatically replicated to the target</li>
                        <li class="fragment fade-up">AWS schema conversion tool (schema, views, stored procedures, functions)</li>
					</ul>					
				</section>
    
                <section data-transition="convex">                    
					<h3></h3>					
					<ul>
                        <li></li>
					</ul>					
				</section>
                
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			var init = {
				history: true,
				controls: true,
				parallaxBackgroundImage: 'images/bg1.jpg',
				parallaxBackgroundSize: "3840px 2160px",

				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'socket.io-1.3.5.js', async: true },
					{ src: 'plugin/multiplex/master.js', async: true }
				]
			};

			/*//no cheating :) follow the presentation please until it is over
			if(window.location.href.indexOf("nopresentation") === -1){
					init.multiplex = {
						 secret: null,
						 id: '61b5692141ebe40c',
						 url: 'https://reveal-js-multiplex-ccjbegmaii.now.sh'
					};
					init.dependencies.push({ src: 'plugin/multiplex/client.js', async: true });
					init.controls = false;
					init.keyboard = false;
			}*/

			Reveal.initialize(init);
		</script>
	</body>
</html>
